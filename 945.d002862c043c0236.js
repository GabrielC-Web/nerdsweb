"use strict";(self.webpackChunknerdsweb=self.webpackChunknerdsweb||[]).push([[945],{8945:(F,L,c)=>{c.d(L,{n:()=>T});var e=c(5879),_=c(6223),d=c(4630),f=c(8525),I=c(3987),v=c(8535),M=c(5628),V=c(7700),O=c(3958),g=c(9157),E=c(3680),K=c(2032),D=c(617),C=c(6814),N=c(861);const A=["myAutocompleteInput"],y=function(o,s){return{"width.px":o,"height.px":s,"max-height":"24px"}};function b(o,s){if(1&o&&e._UZ(0,"img",17),2&o){const t=e.oxw(3);e.Q6J("ngStyle",e.WLB(2,y,t.imgDimentions.width,t.imgDimentions.height))("src",t.choosenImageRoute,e.LSH)}}function P(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",18),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3);return e.KtG(r.clearSelected())}),e._uU(1,"clear"),e.qZA()}}function Z(o,s){1&o&&(e.TgZ(0,"mat-icon",19),e._uU(1,"arrow_drop_down"),e.qZA())}const R=function(o,s){return{"width.px":o,"height.px":s}};function B(o,s){if(1&o&&e._UZ(0,"img",24),2&o){const t=e.oxw().$implicit,i=e.oxw(3);e.Q6J("ngStyle",e.WLB(2,R,i.imgDimentions.width,i.imgDimentions.height))("src",i.imagesRoute+t[i.imageSearchKey].toLowerCase()+".svg",e.LSH)}}function U(o,s){if(1&o&&(e.TgZ(0,"mat-option",20)(1,"div",21),e.YNc(2,B,1,5,"img",22),e.TgZ(3,"p",23),e._uU(4),e.qZA()()()),2&o){const t=s.$implicit,i=e.oxw(3);e.Q6J("ngClass",i.showOptionsBorder?"border-bottom":"")("value",t[i.optionName]),e.xp6(2),e.Q6J("ngIf",i.displayImages),e.xp6(2),e.Oqu(t[i.optionName])}}function J(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",7)(1,"div",8),e.YNc(2,b,1,5,"img",9),e.TgZ(3,"input",10,11),e.NdJ("ngModelChange",function(r){e.CHM(t);const u=e.oxw(2);return e.KtG(u.currentValue=r)})("blur",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onTouch())})("input",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.filterCurrentValue())}),e.qZA(),e.YNc(5,P,2,0,"mat-icon",12),e.YNc(6,Z,2,0,"mat-icon",13),e.qZA(),e.TgZ(7,"mat-autocomplete",14,15),e.NdJ("closed",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onTouch())})("optionSelected",function(r){e.CHM(t);const u=e.oxw(2);return e.KtG(u.selectAutocomplete(r))}),e.YNc(9,U,5,4,"mat-option",16),e.qZA()()}if(2&o){const t=e.MAs(8),i=e.oxw(2);e.xp6(2),e.Q6J("ngIf",i.choosenImageRoute&&i.displayImages),e.xp6(1),e.Q6J("placeholder",i.placeholder)("onlyNumber",i.onlyNumber)("readonly",i.readOnly)("minlength",i.minLength)("required",i.required)("disabled",i.disabled)("maxlength",i.maxLength)("ngModel",i.currentValue)("errorStateMatcher",i.errorMatcher())("matAutocomplete",t),e.xp6(2),e.Q6J("ngIf",i.choosenSearchKeyValue&&i.displayClearSelect),e.xp6(1),e.Q6J("ngIf",!i.choosenSearchKeyValue),e.xp6(1),e.Q6J("hideSingleSelectionIndicator",!0),e.xp6(2),e.Q6J("ngForOf",i.filteredList)}}function w(o,s){if(1&o&&e._UZ(0,"img",24),2&o){const t=e.oxw().$implicit,i=e.oxw(3);e.Q6J("ngStyle",e.WLB(2,y,i.imgDimentions.width,i.imgDimentions.height))("src",i.imagesRoute+t[i.imageSearchKey].toLowerCase()+".svg",e.LSH)}}function n(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-option",27),e.NdJ("onSelectionChange",function(r){e.CHM(t);const u=e.oxw(3);return e.KtG(u.selectValue(r))}),e.TgZ(1,"div",28),e.YNc(2,w,1,5,"img",22),e.TgZ(3,"p",23),e._uU(4),e.qZA()()()}if(2&o){const t=s.$implicit,i=e.oxw(3);e.Q6J("ngClass",i.showOptionsBorder?"border-bottom":"")("value",t[i.optionName]),e.xp6(2),e.Q6J("ngIf",i.displayImages),e.xp6(2),e.Oqu(i.siblingOptionValue?t[i.siblingOptionValue]+" | "+t[i.optionName]:t[i.optionName])}}function l(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-select",25),e.NdJ("ngModelChange",function(r){e.CHM(t);const u=e.oxw(2);return e.KtG(u.valueSelected=r)})("blur",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onTouch())}),e.YNc(1,n,5,4,"mat-option",26),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("hideSingleSelectionIndicator",!0)("errorStateMatcher",t.errorMatcher())("placeholder",t.placeholder)("required",t.required)("disabled",t.disabled)("ngModel",t.valueSelected),e.xp6(1),e.Q6J("ngForOf",t.optionsList)}}function a(o,s){if(1&o&&e._UZ(0,"img",32),2&o){const t=e.oxw(3);e.Q6J("ngStyle",e.WLB(2,y,t.imgDimentions.width,t.imgDimentions.height))("src",t.choosenImageRoute,e.LSH)}}function m(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",29),e.YNc(1,a,1,5,"img",30),e.TgZ(2,"input",31),e.NdJ("ngModelChange",function(r){e.CHM(t);const u=e.oxw(2);return e.KtG(u.valueSelected=r)}),e.qZA(),e.TgZ(3,"mat-icon",19),e._uU(4,"arrow_drop_down"),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.displayImages&&t.choosenImageRoute),e.xp6(1),e.Q6J("placeholder",t.placeholder)("onlyNumber",t.onlyNumber)("readonly",t.readOnly)("minlength",t.minLength)("required",t.required)("disabled",t.disabled)("maxlength",t.maxLength)("ngModel",t.valueSelected)("errorStateMatcher",t.errorMatcher())}}function h(o,s){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.CmmErrorMessagesObject.required," ")}}function p(o,s){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.replaceMessage?t.CmmErrorMessagesObject.incorrectPattern:t.CmmErrorMessagesObject.incorrectOption," ")}}function S(o,s){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.control.errors?null:t.control.errors.message," ")}}function x(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",1)(1,"mat-form-field",2),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG("dialog"==r.selectMode&&r.openSelectDialog())}),e.TgZ(2,"mat-label"),e._uU(3),e.qZA(),e.YNc(4,J,10,15,"div",3),e.YNc(5,l,2,7,"mat-select",4),e.YNc(6,m,5,10,"div",5),e.YNc(7,h,2,1,"mat-error",6),e.YNc(8,p,2,1,"mat-error",6),e.YNc(9,S,2,1,"mat-error",6),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("subscriptSizing",t.subscriptSizing)("ngClass","dialog"==t.selectMode?"cursor-pointer":""),e.xp6(2),e.Oqu(t.label),e.xp6(1),e.Q6J("ngIf","autocomplete"==t.selectMode),e.xp6(1),e.Q6J("ngIf","select"==t.selectMode),e.xp6(1),e.Q6J("ngIf","dialog"==t.selectMode),e.xp6(1),e.Q6J("ngIf",null==t.control||null==t.control.errors?null:t.control.errors.required),e.xp6(1),e.Q6J("ngIf",(null==t.control||null==t.control.errors?null:t.control.errors.incorrectOption)&&!(null!=t.control&&null!=t.control.errors&&t.control.errors.required)),e.xp6(1),e.Q6J("ngIf",null==t.control||null==t.control.errors?null:t.control.errors.apiError)}}let T=(()=>{class o{onKeyDown(t){this.choosenSearchKeyValue&&"Backspace"!=t.code&&this.validateOnFilter&&t.preventDefault(),"Tab"==t.key&&this.myAutocompleteInput?.nativeElement?.blur()}constructor(t,i,r){this.injector=t,this.dialog=i,this.dialogService=r,this.readOnly=!1,this.placeholder="",this.label="",this.minLength=0,this.maxLength=80,this.currentValue="",this.onChange=u=>{},this.onTouch=u=>{},this.disabled=!1,this.required=!1,this.CmmErrorMessagesObject={...v.K},this.CmmReplaceStringIndicator=v.k,this.onlyNumber=!1,this.errors=null,this.implementCustomInput=!0,this.subscriptSizing="fixed",this.inputChange=new e.vpe,this.optionsList=[],this.filteredList=[],this.optionKey="",this.optionName="",this.validateOnFilter=!0,this.emitUnfilteredValues=!0,this.siblingOptionValue="",this.displayImages=!1,this.imagesRoute="",this.imageSearchKey="",this.imgDimentions={width:30,height:30},this.selectMode="select",this.displayClearSelect=!0,this.replaceMessage="",this.showOptionsBorder=!1,this.choosenImageRoute="",this.valueSelected="",this.choosenSearchKeyValue="",this.typicalValue="v",this.errorStateMatcher={isErrorState:u=>u&&u.invalid}}ngOnInit(){this.replaceErrorMessages()}ngOnChanges(t){t.optionsList&&this.optionsList.length&&(this.filteredList=this.optionsList,this.addFilterValidator(),this.currentValue&&this.filterInitialValue())}ngAfterViewInit(){const t=this.injector.get(_.a5);t&&setTimeout(()=>{this.control=t.control,this.control&&this.optionsList.length&&this.addFilterValidator(),this.required=this.control?.hasValidator(_.kI.required),this.preselectTypicalValue()})}ngOnDestroy(){}writeValue(t){this.onTouch(),this.currentValue=t,this.currentValue?this.filterInitialValue():this.clearSelected()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouch=t}setDisabledState(t){this.disabled=t}replaceErrorMessages(){this.CmmErrorMessagesObject.incorrectPattern=this.CmmErrorMessagesObject.incorrectPattern.replace(this.CmmReplaceStringIndicator,this.replaceMessage)}addFilterValidator(){this.validateOnFilter&&this.optionsList.length&&(this.control?.addValidators((0,M.oY)(this.optionsList,this.optionKey)),this.control?.updateValueAndValidity())}emitValue(t){this.onTouch(),this.onChange(t?this.currentValue:this.choosenSearchKeyValue),this.inputChange.emit()}errorMatcher(){return new I.Zi(this.control,this.errors)}getFinalImage(t){this.choosenImageRoute="";let i=this.optionsList.filter(r=>r[this.optionKey]==t)[0];i&&(this.choosenImageRoute=this.imagesRoute+i[this.imageSearchKey].toLowerCase()+".svg")}selectValue(t){t.isUserInput&&(this.choosenSearchKeyValue=this.optionsList.filter(i=>i[this.optionName]==t.source.value)[0][this.optionKey],this.displayImages&&this.getFinalImage(this.choosenSearchKeyValue),this.emitValue())}selectAutocomplete(t){this.choosenSearchKeyValue=this.optionsList.filter(i=>i[this.optionName]==t.option.value)[0][this.optionKey],this.displayImages&&this.getFinalImage(this.choosenSearchKeyValue),this.emitValue()}setInitialValue(t){this.choosenSearchKeyValue=this.optionsList.filter(i=>i[this.optionName]==this.currentValue)?.[0]?.[this.optionKey],this.displayImages&&this.getFinalImage(this.choosenSearchKeyValue),t&&this.emitValue()}filterInitialValue(t){if(this.optionsList.length)switch(this.selectMode){case"select":this.valueSelected=this.optionsList.filter(i=>i[this.optionKey]==this.currentValue)[0][this.optionName];break;case"autocomplete":case"dialog":this.valueSelected=this.optionsList.filter(i=>i[this.optionKey]==this.currentValue)[0]?.[this.optionName],this.currentValue=this.valueSelected??this.currentValue,this.currentValue&&this.setInitialValue(t)}}filterCurrentValue(){this.choosenImageRoute="",this.choosenSearchKeyValue="",this.filteredList=this.filterList(),1==this.filteredList.length&&this.filteredList[0][this.optionName].toLowerCase()==this.currentValue.toLowerCase()?(this.myMatAutocomplete.options.toArray().find(i=>i.value.toLowerCase()==this.currentValue.toLowerCase())?.select(),this.filteredList=[]):this.emitUnfilteredValues&&this.emitValue(!0)}filterList(){return this.optionsList.filter(t=>t[this.optionName].toLowerCase().includes(this.currentValue.toLowerCase()))}preselectTypicalValue(){this.filteredList?.filter(i=>i[this.optionName].toLowerCase()==this.typicalValue)[0]?.[this.optionKey]&&(this.currentValue||(this.currentValue=this.filteredList.filter(i=>i[this.optionName].toLowerCase()==this.typicalValue)[0]?.[this.optionKey],this.filterInitialValue(!0)))}clearSelected(){this.filteredList=this.optionsList,this.currentValue="",this.choosenSearchKeyValue="",this.choosenImageRoute="",this.emitValue()}openSelectDialog(){this.dialogService.CmmOpenSelectionDialog({title:this.label,label:this.label,placeholder:"Ej: BS",optionsList:this.optionsList,optionValue:this.optionName,searchKey:this.optionKey,displayImages:this.displayImages,imagesRoute:this.imagesRoute,imageSearchKey:this.imageSearchKey,imgDimentions:this.imgDimentions,siblingOptionValue:this.siblingOptionValue}).subscribe(i=>{i&&(this.valueSelected=i,this.choosenSearchKeyValue=this.optionsList.filter(r=>r[this.optionName]==this.valueSelected)[0][this.optionKey],this.displayImages&&this.getFinalImage(this.choosenSearchKeyValue),this.emitValue())})}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(e.zs3),e.Y36(V.uw),e.Y36(O.v))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["cmm-cmp-i-select"]],viewQuery:function(i,r){if(1&i&&(e.Gf(d.XC,5),e.Gf(A,5)),2&i){let u;e.iGM(u=e.CRH())&&(r.myMatAutocomplete=u.first),e.iGM(u=e.CRH())&&(r.myAutocompleteInput=u.first)}},hostBindings:function(i,r){1&i&&e.NdJ("keydown",function(Q){return r.onKeyDown(Q)})},inputs:{error:"error",readOnly:"readOnly",placeholder:"placeholder",label:"label",minLength:"minLength",maxLength:"maxLength",required:"required",onlyNumber:"onlyNumber",errors:"errors",implementCustomInput:"implementCustomInput",subscriptSizing:"subscriptSizing",optionsList:"optionsList",optionKey:"optionKey",optionName:"optionName",validateOnFilter:"validateOnFilter",emitUnfilteredValues:"emitUnfilteredValues",siblingOptionValue:"siblingOptionValue",displayImages:"displayImages",imagesRoute:"imagesRoute",imageSearchKey:"imageSearchKey",imgDimentions:"imgDimentions",selectMode:"selectMode",displayClearSelect:"displayClearSelect",replaceMessage:"replaceMessage",showOptionsBorder:"showOptionsBorder"},outputs:{inputChange:"inputChange"},features:[e._Bn([{provide:_.JU,useExisting:(0,e.Gpc)(()=>o),multi:!0},{provide:_.a5,useValue:{}},{provide:f.PG,useValue:{overlayPanelClass:"overlay_pane_cdk_margin"}}]),e.TTD],decls:1,vars:1,consts:[["class","w-100",4,"ngIf"],[1,"w-100"],["appearance","outline",1,"w-100","input-size","px-0",3,"subscriptSizing","ngClass","click"],["class","w-100 h-100",4,"ngIf"],["class","p-0 ccng-bgsecondary h-100",3,"hideSingleSelectionIndicator","errorStateMatcher","placeholder","required","disabled","ngModel","ngModelChange","blur",4,"ngIf"],["class","d-flex w-100 h-100 justify-content-between align-items-center px-0 position-relative",4,"ngIf"],[4,"ngIf"],[1,"w-100","h-100"],[1,"d-flex","justify-content-between","align-items-center","px-0","position-relative"],["class","ms-1","alt","",3,"ngStyle","src",4,"ngIf"],["type","text","inputmode","search","cmm-di-number-format","","matInput","",1,"autocomplete_input",3,"placeholder","onlyNumber","readonly","minlength","required","disabled","maxlength","ngModel","errorStateMatcher","matAutocomplete","ngModelChange","blur","input"],["myAutocompleteInput",""],["class","cursor-pointer me-2 fs-23","matIconSuffix","",3,"click",4,"ngIf"],["matIconSuffix","","class","cursor-pointer me-2 fs-23",4,"ngIf"],["autoActiveFirstOption","",3,"hideSingleSelectionIndicator","closed","optionSelected"],["auto","matAutocomplete"],["class","p-0 px-3 option_bg hiddeScrollBar",3,"ngClass","value",4,"ngFor","ngForOf"],["alt","",1,"ms-1",3,"ngStyle","src"],["matIconSuffix","",1,"cursor-pointer","me-2","fs-23",3,"click"],["matIconSuffix","",1,"cursor-pointer","me-2","fs-23"],[1,"p-0","px-3","option_bg","hiddeScrollBar",3,"ngClass","value"],[1,"d-flex","justify-content-between","align-items-center","px-0"],["class","me-1","alt","",3,"ngStyle","src",4,"ngIf"],[1,"m-0"],["alt","",1,"me-1",3,"ngStyle","src"],[1,"p-0","ccng-bgsecondary","h-100",3,"hideSingleSelectionIndicator","errorStateMatcher","placeholder","required","disabled","ngModel","ngModelChange","blur"],["class","p-0 px-2 option_bg hiddeScrollBar",3,"ngClass","value","onSelectionChange",4,"ngFor","ngForOf"],[1,"p-0","px-2","option_bg","hiddeScrollBar",3,"ngClass","value","onSelectionChange"],[1,"d-flex","justify-content-between","align-items-center","px-3"],[1,"d-flex","w-100","h-100","justify-content-between","align-items-center","px-0","position-relative"],["matPrefix","","class","h-100 ms-3","alt","",3,"ngStyle","src",4,"ngIf"],["type","text","cmm-di-number-format","","matInput","",1,"autocomplete_input",3,"placeholder","onlyNumber","readonly","minlength","required","disabled","maxlength","ngModel","errorStateMatcher","ngModelChange"],["matPrefix","","alt","",1,"h-100","ms-3",3,"ngStyle","src"]],template:function(i,r){1&i&&e.YNc(0,x,10,9,"div",0),2&i&&e.Q6J("ngIf",r.implementCustomInput)},dependencies:[g.KE,g.hX,g.TO,g.qo,g.R9,f.gD,E.ey,K.Nt,D.Hw,d.XC,d.ZL,C.mk,C.sg,C.O5,C.PC,_.Fj,_.JJ,_.Q7,_.wO,_.nD,_.On,N.W],styles:[".mat-autocomplete-panel:not([class*=mat-elevation-z]){box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f!important}  .overlay_pane_cdk_margin{padding-top:1.4rem!important}.option_bg[_ngcontent-%COMP%]{background-color:#fff;border:none;width:100%}.autocomplete_input[_ngcontent-%COMP%]{width:77%}"]})}return o})()},5628:(F,L,c)=>{function d(n){return"string"!=typeof n.value||n.value.match(/\d/)&&" BT"!==n.value.substr(1,4)&&" B"!==n.value.substr(1,3)&&" PT"!==n.value.substr(1,4)&&" USD IN"!==n.value.substr(1,8)&&" USD NA"!==n.value.substr(1,8)&&" EU"!==n.value.substr(1,4)?null:{num:!0}}function f(n){return"string"!=typeof n.value||n.value.match(/\!|\@|\#|\?|\$|\%|\^|\&|\*|\(|\)|\_|\-|\[|\]|\{|\}|\=|\+|\;|\'|\`|\.|\||\\|\<|\>|\~|\"|\:|\//)?null:{espec:!0}}function I(n){return"string"==typeof n.value&&n.value.toLowerCase().match(/(.)\1\1/)?{threeChar:!0}:null}function v(n){return"string"!=typeof n.value||n.value.match(/[a-z\u00f1]/)?null:{minus:!0}}function M(n){return"string"!=typeof n.value||n.value.match(/[A-Z\u00d1]/)?null:{mayus:!0}}function V(n){return"string"==typeof n.value&&n.value.match(/[\xe0-\xfc]|[\xc0-\xdc]/)?{accent:!0}:null}function O(n){return"string"==typeof n.value&&n.value.match(/\s/)?{spaces:!0}:null}function y(n,l){return a=>{const h=a.controls[l];h.errors&&!h.errors.mustMatch||h.setErrors(a.controls[n].value!==h.value?{mustMatch:!0}:null)}}function b(n){return l=>l.value?.length<n?{minLength:!0}:null}function w(n,l){return a=>{let m=a.value?.toLowerCase(),h=[];return n.forEach(p=>{h.push(p[l]?.toLowerCase())}),m&&!h.includes(m)?{incorrectOption:!0}:null}}c.d(L,{IQ:()=>V,M3:()=>d,Vq:()=>v,Yf:()=>y,av:()=>b,iC:()=>M,kw:()=>O,oY:()=>w,pN:()=>I,tS:()=>f}),c(6223).kI.maxLength(16),b(8)}}]);